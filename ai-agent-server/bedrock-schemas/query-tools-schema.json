{
  "openapi": "3.0.0",
  "info": {
    "title": "Query Tools API",
    "version": "1.2.0",
    "description": "Read-only queries for business data"
  },
  "paths": {
    "/query_resources": {
      "post": {
        "summary": "Query resources (operators) via /api/resources",
        "description": "READ-ONLY. Use x-resource-type header to select resource kind (appointment, patient, treatment, medic, service, setting, ...). Supports action=list|get, optional resourceId for get, and arbitrary filters including startDate/endDate and nested fields like data.patientName.",
        "operationId": "query_resources",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["businessId", "locationId", "action", "resourceType"],
                "properties": {
                  "businessId": { "type": "string" },
                  "locationId": { "type": "string" },
                  "action": { "type": "string", "enum": ["list", "get"] },
                  "resourceType": { "type": "string" },
                  "resourceId": { "type": "string" },
                  "params": { "type": "object" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Successful query" } }
      }
    },
    "/query_patient_booking": {
      "post": {
        "summary": "Query patient-booking endpoints",
        "description": "READ-ONLY. Actions: available-dates (from,to), day-slots (date, optional: serviceId, medicId), history (x-access-code optional). For services/treatments listing, use query_resources with resourceType=treatment.",
        "operationId": "query_patient_booking",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["businessId", "locationId", "action"],
                "properties": {
                  "businessId": { "type": "string" },
                  "locationId": { "type": "string" },
                  "action": { "type": "string", "enum": ["available-dates", "day-slots", "history"] },
                  "params": {
                    "type": "object",
                    "properties": {
                      "date": { "type": "string", "description": "YYYY-MM-DD (required for day-slots)" },
                      "serviceId": { "type": "string" },
                      "medicId": { "type": "string" }
                    }
                  },
                  "accessCode": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Successful query" } }
      }
    }
  }
}