{
  "id": "dental-conversation-pattern-customerBooking",
  "title": "Conversation Pattern: Pacient/Client vrea să facă o programare",
  "text": "# Conversation Pattern: Pacient/Client vrea să facă o programare\n\n**Document Type:** conversation-pattern\n**Role:** customer\n**Business Type:** dental\n\n---\n\n**Scenario:** Un pacient/client vrea să facă o programare online\n**Workflow:** Optimizat pentru experiență rapidă și plăcută\n\n## PAȘI PENTRU CREAREA PROGRAMĂRII:\n\n### Step 1: Identifică serviciul dorit\n**Action:** Înțelege ce serviciu/tratament dorește pacientul\n**Question:** \"Ce serviciu vă interesează? (consultație, detartraj, implant, albire, etc.)\"\n\n**Tool:** query_resources\n**Parameters:**\n  - resourceType: 'treatment'\n  - params: { 'data.treatmentName': 'nume_serviciu' } (opțional, pentru căutare specifică)\n\n**Note:** \n- Prezintă serviciile disponibile cu prețuri și durate\n- Fii descriptiv și ajută pacientul să aleagă\n- Salvează serviceId pentru programare\n\n### Step 2: Verifică disponibilitatea (UN SINGUR APEL!)\n**Action:** Obține toate datele și orele disponibile\n\n**Tool:** query_patient_booking\n**Parameters:**\n  - action: 'available-dates-with-slots'\n  - params:\n    * from: 'YYYY-MM-DD' (de obicei azi sau mâine)\n    * to: 'YYYY-MM-DD' (de obicei 2-4 săptămâni în viitor)\n    * serviceId: 'ID_serviciu' (din Step 1)\n\n**Important:**\n- Folosește DOAR 'available-dates-with-slots' - cel mai eficient!\n- Obții toate datele cu sloturile în UN SINGUR apel\n- Prezintă rezultatele organizat pe zile\n\n**Response Format:**\n\"Am găsit următoarele date și ore disponibile:\n- Luni 21 octombrie: 10:00, 14:30, 16:00\n- Miercuri 23 octombrie: 09:00, 11:30, 15:00\n- Vineri 25 octombrie: 10:30, 14:00\nCe dată și oră vă convin?\"\n\n### Step 3: Colectează datele pacientului\n**Action:** Obține informații de contact pentru confirmare\n**Questions:**\n  1. \"Vă rog să-mi spuneți numele complet\"\n  2. \"Care este email-ul dumneavoastră?\" (OBLIGATORIU)\n  3. \"Și numărul de telefon?\" (pentru SMS-uri de reminder)\n\n**Validation:**\n- Email este OBLIGATORIU - fără el nu se poate crea programarea\n- Verifică formatul email-ului\n- Telefonul este opțional dar recomandat\n\n### Step 4: Creează programarea\n**Action:** Confirmă și creează programarea\n\n**Tool:** query_patient_booking\n**Parameters:**\n  - action: 'reserve'\n  - businessId: from_context\n  - locationId: from_context\n  - params:\n    * date: 'YYYY-MM-DD' (aleasă de pacient)\n    * time: 'HH:mm' (aleasă de pacient)\n    * serviceId: from_step_1\n    * customer:\n      - name: from_step_3\n      - email: from_step_3 (REQUIRED)\n      - phone: from_step_3\n\n**Important:**\n- Verifică că toate datele sunt corecte înainte de a crea\n- NU crea programarea dacă lipsește email-ul\n- Sistemul va crea/găsi automat înregistrarea pacientului\n\n### Step 5: Confirmă succesul\n**Action:** Informează pacientul despre programarea creată\n\n**Response Format:**\n\"Excelent! Programarea dumneavoastră a fost confirmată! ✅\n\n📅 Data: [zi, data]\n🕐 Ora: [ora]\n🦷 Serviciu: [nume serviciu]\n👤 Pacient: [nume]\n📧 Email: [email]\n📱 Telefon: [telefon]\n\nVeți primi un email de confirmare la adresa [email].\nDacă doriți să modificați sau anulați programarea, vă rugăm să ne contactați.\n\nVă așteptăm cu drag!\"\n\n## EXEMPLE COMPLETE:\n\n### Exemplul 1: Flux complet simplu\n\n**User:** \"Vreau să fac o programare pentru o consultație\"\n\n**AI Step 1:** [query_resources(resourceType: 'treatment', params: {'data.treatmentName': 'consultație'})]\n\"Bună ziua! Consultația stomatologică costă 150 RON și durează 30 minute. Include examinare completă și plan de tratament. Când doriți să veniți?\"\n\n**User:** \"Săptămâna viitoare\"\n\n**AI Step 2:** [query_patient_booking(action: 'available-dates-with-slots', params: {from: '2025-10-21', to: '2025-10-27', serviceId: 'T0100001'})]\n\"Perfect! Am găsit următoarele date și ore disponibile:\n- Luni 21 octombrie: 10:00, 14:30, 16:00\n- Miercuri 23 octombrie: 09:00, 11:30, 15:00\n- Vineri 25 octombrie: 10:30, 14:00\nCe dată și oră vă convin?\"\n\n**User:** \"Miercuri la 15:00\"\n\n**AI Step 3:** \"Excelent! Pentru a confirma programarea, am nevoie de câteva informații:\n1. Numele dumneavoastră complet?\"\n\n**User:** \"Maria Ionescu\"\n\n**AI:** \"2. Email-ul dumneavoastră?\"\n\n**User:** \"maria.ionescu@example.com\"\n\n**AI:** \"3. Și numărul de telefon?\"\n\n**User:** \"0712345678\"\n\n**AI Step 4:** [query_patient_booking(action: 'reserve', params: {date: '2025-10-23', time: '15:00', serviceId: 'T0100001', customer: {name: 'Maria Ionescu', email: 'maria.ionescu@example.com', phone: '0712345678'}})]\n\n**AI Step 5:** \"Excelent! Programarea dumneavoastră a fost confirmată! ✅\n\n📅 Data: Miercuri, 23 octombrie 2025\n🕐 Ora: 15:00\n🦷 Serviciu: Consultație stomatologică (30 min, 150 RON)\n👤 Pacient: Maria Ionescu\n📧 Email: maria.ionescu@example.com\n📱 Telefon: 0712345678\n\nVeți primi un email de confirmare la adresa maria.ionescu@example.com.\nDacă doriți să modificați sau anulați programarea, vă rugăm să ne contactați.\n\nVă așteptăm cu drag!\"\n\n### Exemplul 2: Cu medic specific\n\n**User:** \"Vreau programare la Dr. Popescu pentru detartraj\"\n\n**AI:** [query_resources(resourceType: 'treatment')] + [query_resources(resourceType: 'medic', params: {'data.medicName': 'Popescu', 'data.canTakeAppointments': true})]\n\n**Scenario A - Medic disponibil:**\n\"Bună ziua! Detartrajul costă 200 RON și durează 45 minute. Dr. Popescu este disponibil. Să verificăm orele libere. Când doriți să veniți?\"\n\n**User:** \"În următoarele 2 săptămâni\"\n\n**AI:** [query_patient_booking(action: 'available-dates-with-slots', params: {from: '2025-10-16', to: '2025-10-30', serviceId: 'T0100005', medicId: 'M0100001'})]\n\"Am găsit următoarele date când Dr. Popescu este disponibil:\n- Joi 17 octombrie: 11:00, 16:30\n- Marți 22 octombrie: 10:00, 14:00\n- Joi 24 octombrie: 09:30, 15:00\nCe dată preferați?\"\n\n[... continuă cu colectarea datelor și crearea programării]\n\n**Scenario B - Medic indisponibil (canTakeAppointments: false):**\nAI: [query_resources(resourceType: 'medic', params: {'data.medicName': 'Popescu'})] → găsit dar canTakeAppointments: false\n\n\"Îmi pare rău, dar Dr. Popescu nu poate primi programări în acest moment. Vă pot ajuta să găsiți un alt medic pentru detartraj. Avem disponibili:\n- Dr. Ionescu - specializat în igienizare dentară\n- Dr. Vasilescu - cu experiență în parodontologie\nPreferați unul dintre ei, sau doriți să vedeți toate orele disponibile indiferent de medic?\"\n\n## SITUAȚII SPECIALE:\n\n### Dacă NU există disponibilitate:\n\"Din păcate, nu am găsit locuri libere în perioada solicitată pentru acest serviciu. \nCele mai apropiate date disponibile sunt în [perioada]. Vă interesează, sau preferați un alt serviciu?\"\n\n### Dacă pacientul nu are email:\n\"Înțeleg, însă pentru a confirma programarea online, email-ul este necesar (pentru confirmare și reminder-e). \nDacă nu aveți email, vă recomand să sunați direct la clinică la [număr telefon] pentru a face programarea telefonic.\"\n\n### Dacă pacientul vrea să schimbe ora după ce a ales:\n\"Fără probleme! Haideți să căutăm o altă dată și oră care vă convine mai bine.\"\n[Reiau Step 2 cu query_patient_booking]\n\n## IMPORTANT - NU FACE:\n\n❌ NU crea programarea fără să verifici disponibilitatea mai întâi\n❌ NU folosi query_resources pentru a vedea programările (folosește query_patient_booking)\n❌ NU crea programare fără email\n❌ NU folosești call_frontend_function - nu ai acces!\n❌ NU accesezi date despre alți pacienți\n❌ NU oferi diagnostice medicale\n\n## BEST PRACTICES:\n\n✅ Folosește ÎNTOTDEAUNA 'available-dates-with-slots' pentru eficiență\n✅ Fii prietenos și răbdător\n✅ Verifică că ai toate datele înainte de a crea programarea\n✅ Confirmă programarea cu detalii complete\n✅ Menționează că vor primi email de confirmare\n✅ Explică simplu și clar fiecare pas\n",
  "metadata": {
    "businessType": "dental",
    "version": "2.0.0",
    "lastUpdated": "2025-10-16",
    "type": "conversation-pattern",
    "role": "customer",
    "patternKey": "customerBooking",
    "scenario": "Pacient/Client vrea să facă o programare online",
    "documentId": "dental-conversation-pattern-customerBooking",
    "source": "dental-knowledge-base",
    "workflow": {
      "steps": 5,
      "estimatedDuration": "2-3 minutes",
      "toolsUsed": [
        "query_resources",
        "query_patient_booking"
      ]
    }
  }
}

