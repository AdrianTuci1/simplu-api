{
  "id": "tool-usage-guide",
  "title": "Agent Tool Usage Guide",
  "type": "guide",
  "businessType": "dental",
  "content": "# Agent Tool Usage Guide\n\n## When to Use Each Tool\n\n### query_app_server - For Real-Time Business Data\n\n**USE THIS TOOL FOR:**\n- Services and treatments (\"What services do we offer?\", \"Treatment prices\", \"Available treatments\")\n- Appointments (\"List today's appointments\", \"Show appointment details\")\n- Patients (\"List patients\", \"Get patient information\")\n- Medics/Doctors (\"Who are our doctors?\", \"Medic availability\")\n- Time slots (\"Available slots for date X\")\n- Appointment history (for customers with access code)\n\n**TWO MODULES:**\n\n1. **patient-booking** (for customers/patients):\n   - action: \"services\" → Get all services/treatments offered\n   - action: \"slots\" → Check available time slots (requires params.date: \"YYYY-MM-DD\")\n   - action: \"history\" → View appointment history (requires accessCode)\n\n2. **resources** (for operators):\n   - action: \"list\" → List resources (MUST specify resourceType)\n   - action: \"get\" → Get specific resource (MUST specify resourceType + resourceId)\n   - resourceType can be: appointment, patient, treatment, medic, service\n\n**REQUIRED PARAMETERS:**\n- businessId: Extract from context\n- locationId: Extract from context\n- module: \"patient-booking\" or \"resources\"\n- action: Depends on module\n- resourceType: REQUIRED for resources module\n\n**EXAMPLES:**\n- User: \"Ce tratamente oferim?\" → query_app_server(module=\"patient-booking\", action=\"services\", businessId, locationId)\n- User: \"Lista de programări\" → query_app_server(module=\"resources\", action=\"list\", resourceType=\"appointment\", businessId, locationId)\n- User: \"Detalii pacient\" → query_app_server(module=\"resources\", action=\"get\", resourceType=\"patient\", resourceId=\"123\", businessId, locationId)\n\n### query_management_server - For Configuration ONLY\n\n**DO NOT USE FOR:**\n- ❌ Services/treatments → Use query_app_server\n- ❌ Appointments → Use query_app_server\n- ❌ Patients → Use query_app_server\n- ❌ Medics → Use query_app_server\n\n**USE ONLY FOR:**\n- ✅ Business configuration and settings\n- ✅ Subscription information\n- ✅ User invitations\n- ✅ Administrative settings\n- ✅ Business hours configuration\n\n**PARAMETERS:**\n- endpoint: The management API endpoint (e.g., \"/api/businesses/{id}\")\n- method: HTTP method (GET, POST, PUT, etc.)\n- params: Query parameters for GET\n- body: Request body for POST/PUT\n- tenantId: Business ID\n\n### call_frontend_function - For Modifications\n\n**USE THIS TOOL FOR:**\n- Creating new resources (appointments, patients)\n- Updating existing resources\n- Deleting resources\n- Navigating to views\n- Submitting forms\n\n**NEVER use query_app_server or query_management_server for CREATE/UPDATE/DELETE!**\n\n**COMMON FUNCTIONS:**\n- createResource(resourceType, data)\n- updateResource(resourceType, resourceId, data)\n- deleteResource(resourceType, resourceId)\n- navigateTo(view)\n- submitForm()\n\n**EXAMPLES:**\n- User: \"Creează programare pentru Ion\" → call_frontend_function(functionName=\"createResource\", parameters={resourceType: \"appointment\", data: {...}})\n- User: \"Șterge programarea\" → call_frontend_function(functionName=\"deleteResource\", parameters={resourceType: \"appointment\", resourceId: \"123\"})\n\n## Decision Tree\n\n```\nUser Request\n    |\n    ├─ \"What/Show/List/Get\" → QUERY (read-only)\n    │   |\n    │   ├─ Services/Treatments/Appointments/Patients/Medics?\n    │   │   → query_app_server ✅\n    │   │\n    │   └─ Business settings/Subscriptions/Config?\n    │       → query_management_server ✅\n    │\n    ├─ \"Create/Update/Delete/Change\" → MODIFICATION\n    │   → call_frontend_function ✅\n    │\n    └─ \"Send/Notify/Message\" → NOTIFICATION\n        → send_elixir_notification or send_external_message ✅\n```\n\n## Common Mistakes to Avoid\n\n### ❌ WRONG:\n```\nUser: \"What services do we offer?\"\nAgent: query_management_server(endpoint=\"/api/services\")\n```\n\n### ✅ CORRECT:\n```\nUser: \"What services do we offer?\"\nAgent: query_app_server(module=\"patient-booking\", action=\"services\", businessId=\"B0100001\", locationId=\"L0100001\")\n```\n\n### ❌ WRONG:\n```\nUser: \"List appointments\"\nAgent: query_management_server(endpoint=\"/api/appointments\")\n```\n\n### ✅ CORRECT:\n```\nUser: \"List appointments\"\nAgent: query_app_server(module=\"resources\", action=\"list\", resourceType=\"appointment\", businessId=\"B0100001\", locationId=\"L0100001\")\n```\n\n## Summary\n\n**Remember:**\n1. For SERVICES/TREATMENTS → query_app_server with module=\"patient-booking\", action=\"services\"\n2. For APPOINTMENTS/PATIENTS/MEDICS → query_app_server with module=\"resources\", resourceType=\"...\"\n3. For BUSINESS CONFIG → query_management_server (rarely needed)\n4. For CREATE/UPDATE/DELETE → call_frontend_function\n5. For NOTIFICATIONS → notification tools\n\n**Always pass businessId and locationId from context!**",
  "metadata": {
    "version": "1.0",
    "lastUpdated": "2025-10-10",
    "tags": ["tools", "guide", "operators", "customers"],
    "category": "technical"
  }
}

