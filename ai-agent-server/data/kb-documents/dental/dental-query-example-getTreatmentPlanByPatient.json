{
  "id": "dental-query-example-getTreatmentPlanByPatient",
  "title": "Query Example: Obține planul de tratament al unui pacient (2-step workflow)",
  "content": "{\n  \"description\": \"Obține planul de tratament al unui pacient. FLUX OBLIGATORIU: identifică pacientul după nume → obține patientId → caută plan după data.patientId\",\n  \"workflow\": {\n    \"step1\": {\n      \"description\": \"Identifică pacientul după nume\",\n      \"tool\": \"query_resources\",\n      \"parameters\": {\n        \"businessId\": \"{{businessId}}\",\n        \"locationId\": \"{{locationId}}\",\n        \"action\": \"list\",\n        \"resourceType\": \"patient\",\n        \"params\": {\n          \"data.patientName\": \"{{patientName}}\"\n        }\n      },\n      \"output\": \"Extract patientId from result\"\n    },\n    \"step2\": {\n      \"description\": \"Obține planul de tratament folosind patientId\",\n      \"tool\": \"query_resources\",\n      \"parameters\": {\n        \"businessId\": \"{{businessId}}\",\n        \"locationId\": \"{{locationId}}\",\n        \"action\": \"list\",\n        \"resourceType\": \"plan\",\n        \"params\": {\n          \"data.patientId\": \"{{patientId}}\"\n        }\n      },\n      \"note\": \"Un pacient poate avea multiple planuri (draft, proposed, accepted). Filtrează după status dacă e necesar: data.status\"\n    }\n  },\n  \"examples\": [\n    {\n      \"query\": \"Arată-mi planul de tratament pentru Maria Ionescu\",\n      \"step1\": \"query_resources(patient, params: {data.patientName: 'Maria Ionescu'}) → patientId: P0100123\",\n      \"step2\": \"query_resources(plan, params: {data.patientId: 'P0100123'})\"\n    },\n    {\n      \"query\": \"Care e planul acceptat pentru Ion Popescu?\",\n      \"step1\": \"query_resources(patient, params: {data.patientName: 'Ion Popescu'}) → patientId: P0100456\",\n      \"step2\": \"query_resources(plan, params: {data.patientId: 'P0100456', data.status: 'accepted'})\"\n    }\n  ],\n  \"important\": [\n    \"NU poți căuta direct plan după nume pacient - TREBUIE să folosești data.patientId\",\n    \"FLUX OBLIGATORIU: Identifică pacient → Obține patientId → Caută plan\",\n    \"Status-uri posibile: draft, proposed, accepted, in_progress, completed, cancelled\",\n    \"Dacă pacientul nu există, oprește-te și informează utilizatorul\"\n  ]\n}",
  "metadata": {
    "businessType": "dental",
    "version": "1.1.0",
    "lastUpdated": "2025-10-14",
    "type": "query-example",
    "exampleKey": "getTreatmentPlanByPatient"
  }
}
